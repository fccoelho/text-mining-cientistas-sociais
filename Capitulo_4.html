

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Aplicando modelagem de assuntos ao DHBB &#8212; Mineração de textos para Cientistas Sociais</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=ac02cc09edc035673794" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=ac02cc09edc035673794" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=ac02cc09edc035673794"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Capitulo_4';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Construindo um Classificador de Textos" href="Capitulo_5.html" />
    <link rel="prev" title="Identificando Entidades Nomeadas e Similaridade Semântica" href="Capitulo_3.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    <p class="title logo__title">Mineração de textos para Cientistas Sociais</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Mineração de Textos para Cientistas Sociais
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Capitulo_1.html">Abrindo Arquivos de Texto</a></li>


<li class="toctree-l1"><a class="reference internal" href="Capitulo_2.html">Contando Palavras</a></li>



<li class="toctree-l1"><a class="reference internal" href="Capitulo_3.html">Identificando Entidades Nomeadas e Similaridade Semântica</a></li>

<li class="toctree-l1 current active"><a class="current reference internal" href="#">Aplicando modelagem de assuntos ao DHBB</a></li>
<li class="toctree-l1"><a class="reference internal" href="Capitulo_5.html">Construindo um Classificador de Textos</a></li>
<li class="toctree-l1"><a class="reference internal" href="Capitulo_6.html">Analizando Redes de Colaboração Científica</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/fccoelho/text-mining-cientistas-sociais/blob/master/Capitulo_4.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/fccoelho/text-mining-cientistas-sociais" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/fccoelho/text-mining-cientistas-sociais/issues/new?title=Issue%20on%20page%20%2FCapitulo_4.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Capitulo_4.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Aplicando modelagem de assuntos ao DHBB</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#word2vec">Word2vec</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#explorando-o-modelo">Explorando o modelo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizando-os-vetores-de-palavras">Visualizando os vetores de palavras</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#word-movers-distance">Word Movers Distance</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizando-a-vizinanca-semantica">Visualizando a Vizinança Semântica</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="aplicando-modelagem-de-assuntos-ao-dhbb">
<h1>Aplicando modelagem de assuntos ao DHBB<a class="headerlink" href="#aplicando-modelagem-de-assuntos-ao-dhbb" title="Permalink to this heading">#</a></h1>
<p>Neste capítulo vamos explorar ferramentas de modelagem de assuntos e explorar aplicações ao DHBB. Como sempre, começamos com alguns imports familiares.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">glob</span><span class="o">,</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">spacy</span>
<span class="kn">from</span> <span class="nn">spacy</span> <span class="kn">import</span> <span class="n">displacy</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">text</span>
<span class="kn">from</span> <span class="nn">dhbbmining</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
</pre></div>
</div>
</div>
</div>
<p>Vamos também carregar o modelo de NLP para a língua portuguesa do Spacy:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Descomente a linha abaixo para instalar</span>
<span class="c1">#!python3 -m spacy download pt_core_news_sm</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;pt_core_news_sm&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Agora faremos alguns imports novos, particularmente da biblioteca <a class="reference external" href="https://radimrehurek.com/gensim">Gensim</a>, que nos oferece as ferramentas que necessitamos para modelagem de assuntos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">string</span> <span class="kn">import</span> <span class="n">punctuation</span>
<span class="kn">from</span> <span class="nn">gensim.test.utils</span> <span class="kn">import</span> <span class="n">datapath</span>
<span class="kn">from</span> <span class="nn">gensim</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">gensim.models</span> <span class="kn">import</span> <span class="n">Word2Vec</span><span class="p">,</span> <span class="n">word2vec</span>
</pre></div>
</div>
</div>
</div>
<p>Para minimizar o uso de memória, vamos construir uma classe para representar o nosso corpus como um iterador, operando diretamente do banco de dados. Desta forma, ao fazer nossas análises, podemos carregar um documento por vez para alimentar os modelos, sem a necessidade de manter todo o corpus na memória, economizando memória RAM.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eng</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite:///minha_tabela.sqlite&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">DHBBCorpus</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Iterador de documentos quebrados em frases</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ndocs</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ndocs</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">7687</span><span class="p">,</span><span class="n">ndocs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">eng</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">con</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;select corpo from resultados limit </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ndocs</span><span class="si">}</span><span class="s1">;&#39;</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pre_process</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">%</span><span class="k">10</span> == 0:
                    <span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Verbete </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="si">}</span><span class="s2"> de </span><span class="si">{</span><span class="mi">6</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">ndocs</span><span class="si">}</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">s</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">def</span> <span class="nf">pre_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">disable</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;tagger&#39;</span><span class="p">,</span> <span class="s1">&#39;ner&#39;</span><span class="p">,</span><span class="s1">&#39;entity-linker&#39;</span><span class="p">,</span> <span class="s1">&#39;textcat&#39;</span><span class="p">,</span><span class="s1">&#39;entity-ruler&#39;</span><span class="p">,</span><span class="s1">&#39;merge-noun-chunks&#39;</span><span class="p">,</span><span class="s1">&#39;merge-entities&#39;</span><span class="p">,</span><span class="s1">&#39;merge-subtokens&#39;</span><span class="p">])</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">n</span><span class="o">.</span><span class="n">sents</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">sentence</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">token</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="n">punctuation</span><span class="p">)</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">s</span> <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="n">punctuation</span><span class="p">)])</span>
        <span class="k">return</span> <span class="n">results</span>
        
</pre></div>
</div>
</div>
</div>
<p>Abaixo um pequeno exemplo de como a classe <code class="docutils literal notranslate"><span class="pre">DHBBCorpus</span></code> funciona:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DC</span> <span class="o">=</span> <span class="n">DHBBCorpus</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">DC</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">break</span>
    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;«Floriano&#39;, &#39;Lopes&#39;, &#39;Rubim»&#39;, &#39;nasceu&#39;, &#39;em&#39;, &#39;Alegre&#39;, &#39;ES&#39;, &#39;no&#39;, &#39;dia&#39;, &#39;18&#39;, &#39;de&#39;, &#39;janeiro&#39;, &#39;de&#39;, &#39;1912&#39;, &#39;filho&#39;, &#39;de&#39;, &#39;Francisco&#39;, &#39;Lopes&#39;, &#39;Rubim&#39;, &#39;funcionário&#39;, &#39;público&#39;, &#39;e&#39;, &#39;de&#39;, &#39;Maria&#39;, &#39;Sílvia&#39;, &#39;Lousada&#39;, &#39;Rubim&#39;]
</pre></div>
</div>
</div>
</div>
<section id="word2vec">
<h2>Word2vec<a class="headerlink" href="#word2vec" title="Permalink to this heading">#</a></h2>
<p>Vamos começar pelo treinamento de um modelo word2vec. Este modelo itera 6 vezes sobre o corpus logo, devemos ver o contador atingir 46122. Estas repetições são necessárias para permitir a melhor estimação da representação vetorial das palavras em um espaço semântico.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s1">&#39;dhbb.w2v&#39;</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Word2Vec</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;dhbb.w2v&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">DC</span> <span class="o">=</span> <span class="n">DHBBCorpus</span><span class="p">()</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Word2Vec</span><span class="p">(</span><span class="n">sentences</span><span class="o">=</span><span class="n">DC</span><span class="p">,</span> <span class="n">workers</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;dhbb.w2v&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="explorando-o-modelo">
<h3>Explorando o modelo<a class="headerlink" href="#explorando-o-modelo" title="Permalink to this heading">#</a></h3>
<p>Como dito anteriormente o modelo do Word2Vec representa cada palavra do vocabulário do corpus como um vetor. Vejamos as dez primeiras palavras:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">word</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="o">.</span><span class="n">index_to_key</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>de
a
do
e
da
o
em
que
no
na
</pre></div>
</div>
</div>
</div>
<p>Enquanto vetores podemos realizar operações aritméticas entre eles. Por exemplo se subtrairmos os vetores de <em>Deputado</em> e  <em>deputado</em> encontraremos que a magnitude do vetor resultante é bem pequena, pois estão muito próximos no espaço vetorial:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vec</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="p">[</span><span class="s1">&#39;Deputado&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="p">[</span><span class="s1">&#39;deputado&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Todos os vetores tem dimensão </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Todos os vetores tem dimensão 100
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>24.32071
</pre></div>
</div>
</div>
</div>
<p>O tamanho total do vocabulário (palavras distintas) é de:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="o">.</span><span class="n">index_to_key</span><span class="p">)</span><span class="si">}</span><span class="s2"> palavras&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>38762 palavras
</pre></div>
</div>
</div>
</div>
<p>Usando a mesma lógica de operações sobre os vetores, podemos usar palavras como representantes de seu significado, efetivamente estabelecendo um cálculo conceitual. Por exemplo: Abaixo vamos buscar as palavras mais similares semanticamente com o conceito de <strong>direita</strong> e ao mesmos antagônicas ao conceito de “Comunista”. Como o corpus do DHBB tem um claro viés político, vemos o termo <em>direita</em> tomar a conotação política usual.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="o">.</span><span class="n">most_similar</span><span class="p">(</span><span class="n">positive</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;direita&#39;</span><span class="p">],</span><span class="n">negative</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Comunista&#39;</span><span class="p">],</span> <span class="n">topn</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;progressistas&#39;, 0.5529391169548035),
 (&#39;segmentos&#39;, 0.5388556718826294),
 (&#39;conservadores&#39;, 0.5193644165992737),
 (&#39;antigetulistas&#39;, 0.515348494052887),
 (&#39;setores&#39;, 0.5146178603172302),
 (&#39;nacionalistas&#39;, 0.5058426856994629),
 (&#39;esquerda&#39;, 0.5054914951324463),
 (&#39;oposição&#39;, 0.4820389747619629),
 (&#39;extrema&#39;, 0.47334492206573486),
 (&#39;oposicionistas&#39;, 0.4595625698566437),
 (&#39;adeptos&#39;, 0.44704267382621765),
 (&#39;udenistas&#39;, 0.44662249088287354),
 (&#39;centro-esquerda&#39;, 0.44410112500190735),
 (&#39;radicais&#39;, 0.43817466497421265),
 (&#39;pessedistas&#39;, 0.4352889060974121),
 (&#39;moderados&#39;, 0.4338815212249756),
 (&#39;liberais&#39;, 0.43283340334892273),
 (&#39;jovens&#39;, 0.43128761649131775),
 (&#39;grupos&#39;, 0.42958810925483704),
 (&#39;ambientalistas&#39;, 0.42890769243240356)]
</pre></div>
</div>
</div>
</div>
<p>O número total de tokens no corpus é de:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">corpus_total_words</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8713256
</pre></div>
</div>
</div>
</div>
</section>
<section id="visualizando-os-vetores-de-palavras">
<h3>Visualizando os vetores de palavras<a class="headerlink" href="#visualizando-os-vetores-de-palavras" title="Permalink to this heading">#</a></h3>
<p>Como os palavras estão inseridas um espaço vetorial de dimensão 100, fica difícil visualizar o seu posicionamento relativo mas podemos nos utilizar de métodos de redução de dimensionalidade com o <a class="reference external" href="https://en.wikipedia.org/wiki/T-distributed_stochastic_neighbor_embedding">TSNE</a>, para visualizarmos um pequeno numero (200) delas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">IncrementalPCA</span>    <span class="c1"># inital reduction</span>
<span class="kn">from</span> <span class="nn">sklearn.manifold</span> <span class="kn">import</span> <span class="n">TSNE</span>                   <span class="c1"># final reduction</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>                                  <span class="c1"># array handling</span>


<span class="k">def</span> <span class="nf">reduce_dimensions</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
    <span class="n">num_dimensions</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># final num dimensions (2D, 3D, etc)</span>

    <span class="n">vectors</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># positions in vector space</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># keep track of words to label our data again later</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="o">.</span><span class="n">index_to_key</span><span class="p">:</span>
        <span class="n">vectors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="p">[</span><span class="n">word</span><span class="p">])</span>
        <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
        <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">200</span><span class="p">:</span>
            <span class="k">break</span>

    <span class="c1"># convert both lists into numpy vectors for reduction</span>
    <span class="n">vectors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">vectors</span><span class="p">)</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>

    <span class="c1"># reduce using t-SNE</span>
    <span class="n">vectors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">vectors</span><span class="p">)</span>
    <span class="n">tsne</span> <span class="o">=</span> <span class="n">TSNE</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">num_dimensions</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">vectors</span> <span class="o">=</span> <span class="n">tsne</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">vectors</span><span class="p">)</span>

    <span class="n">x_vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vectors</span><span class="p">]</span>
    <span class="n">y_vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vectors</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">x_vals</span><span class="p">,</span> <span class="n">y_vals</span><span class="p">,</span> <span class="n">labels</span>


<span class="n">x_vals</span><span class="p">,</span> <span class="n">y_vals</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">reduce_dimensions</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">plot_with_plotly</span><span class="p">(</span><span class="n">x_vals</span><span class="p">,</span> <span class="n">y_vals</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">plot_in_notebook</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="kn">import</span> <span class="n">init_notebook_mode</span><span class="p">,</span> <span class="n">iplot</span><span class="p">,</span> <span class="n">plot</span>
    <span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="k">as</span> <span class="nn">go</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
        <span class="n">autosize</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="mi">600</span>
    <span class="p">)</span>

    <span class="n">trace</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x_vals</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_vals</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">trace</span><span class="p">]</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span> <span class="n">data</span><span class="p">,</span>
    <span class="n">layout</span><span class="o">=</span> <span class="n">layout</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">plot_in_notebook</span><span class="p">:</span>
        <span class="n">init_notebook_mode</span><span class="p">(</span><span class="n">connected</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;word-embedding-plot&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">plot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;word-embedding-plot.html&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_with_plotly</span><span class="p">(</span><span class="n">x_vals</span><span class="p">,</span> <span class="n">y_vals</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">        <script type="text/javascript">
        window.PlotlyConfig = {MathJaxConfig: 'local'};
        if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
        if (typeof require !== 'undefined') {
        require.undef("plotly");
        requirejs.config({
            paths: {
                'plotly': ['https://cdn.plot.ly/plotly-2.26.0.min']
            }
        });
        require(['plotly'], function(Plotly) {
            window._Plotly = Plotly;
        });
        }
        </script>
        </div><div class="output text_html"><div>                            <div id="7bac7096-4902-4757-a79e-985b03ed96f3" class="plotly-graph-div" style="height:600px; width:800px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("7bac7096-4902-4757-a79e-985b03ed96f3")) {                    Plotly.newPlot(                        "7bac7096-4902-4757-a79e-985b03ed96f3",                        [{"mode":"text","opacity":0.8,"text":["de","a","do","e","da","o","em","que","no","na","para","com","foi","dos","ao","Em","\u00e0","por","os","uma","um","pelo","como","das","governo","ano","as","presidente","sua","se","pela","seu","Partido","Rio","n\u00e3o","outubro","No","C\u00e2mara","dia","A","Paulo","deputado","seguinte","novembro","Nacional","S\u00e3o","Comiss\u00e3o","mandato","entre","O","federal","mais","at\u00e9","Brasil","janeiro","Janeiro","estado","tamb\u00e9m","pol\u00edtica","fevereiro","cargo","legenda","mesmo","mar\u00e7o","sobre","partido","ent\u00e3o","Federal","Rep\u00fablica","ainda","abril","elei\u00e7\u00f5es","presid\u00eancia","pa\u00eds","Jos\u00e9","contra","quando","Jo\u00e3o","anos","Social","dezembro","ser","teve","Estado","ministro","aos","Vargas","maio","pleito","Brasileiro","nas","eleito","Foi","qual","era","assumiu","membro","Com","setembro","nacional","depois","mas","agosto","nos","seus","candidato","passou","Democr\u00e1tico","tornou-se","\u00e0s","movimento","julho","PMDB","sendo","Ainda","Deputados","Congresso","estadual","onde","Senado","filho","durante","apoio","votos","junho","general","Na","nasceu","Minas","novo","dois","governador","segundo","j\u00e1","militar","desse","Assembl\u00e9ia","ap\u00f3s","foram","m\u00eas","Carlos","Minist\u00e9rio","tendo","Justi\u00e7a","primeiro","projeto","suas","campanha","per\u00edodo","Grande","Sul","candidatura","in\u00edcio","comiss\u00e3o","vez","fim","regime","ou","Escola","participou","Universidade","nova","oposi\u00e7\u00e3o","1964","sido","partir","Lu\u00eds","nomeado","Constitui\u00e7\u00e3o","posse","pol\u00edticos","Militar","cria\u00e7\u00e3o","quem","legislatura","Fernando","favor","capital","processo","reforma","Silva","titular","n\u00ba","curso","tr\u00eas","cidade","Ex\u00e9rcito","Ant\u00f4nio","Durante","PSD","Faculdade","chefe","suplente","Distrito","PTB","jornal","direito","Conselho","deixou","elegeu-se","vice-presidente"],"x":[-0.9388281106948853,-1.6382620334625244,-3.6576712131500244,-0.4992700517177582,-2.380222797393799,-4.281491279602051,1.4293283224105835,0.6980834603309631,-4.350240230560303,-2.686955451965332,-0.5945330262184143,-1.519628643989563,-10.484705924987793,8.575089454650879,-4.886443614959717,2.7704062461853027,-4.200926303863525,-6.466333866119385,7.946146011352539,-1.6505945920944214,-4.587985992431641,-6.251397609710693,-11.296868324279785,-6.118083477020264,6.196450233459473,7.56718635559082,-6.361149311065674,0.29506853222846985,-1.0301437377929688,-8.732864379882812,-3.531989097595215,-3.749105930328369,-11.583327293395996,-1.9636858701705933,1.084067463874817,4.810806751251221,-4.839883804321289,4.825193405151367,7.246840000152588,-1.9201804399490356,-3.6085124015808105,5.9466753005981445,-5.680171012878418,4.256604194641113,-5.578423976898193,-2.955911636352539,3.339595079421997,9.744671821594238,-0.3768833577632904,-4.817476272583008,1.837084412574768,1.1041994094848633,2.5263607501983643,8.268503189086914,5.903718948364258,-3.365374803543091,8.463934898376465,-0.4719345271587372,1.742734432220459,6.170801162719727,9.76058292388916,2.593431234359741,-5.6336989402771,5.357739448547363,-2.5838541984558105,5.503264904022217,-1.0638394355773926,0.6331999897956848,-4.081012725830078,-0.2797571122646332,5.4517998695373535,12.157496452331543,0.07994285970926285,8.157537460327148,-3.7916595935821533,-2.216449022293091,1.3299891948699951,-4.57464075088501,2.476456642150879,-5.4864091873168945,4.938490390777588,-10.974804878234863,-8.191272735595703,9.391851425170898,8.993837356567383,8.734892845153809,-6.711580753326416,4.59858512878418,12.13145637512207,-5.529040336608887,-5.965207099914551,-9.191069602966309,-10.665385246276855,0.966606855392456,-9.623601913452148,-7.552295684814453,0.08426185697317123,-1.4638211727142334,4.491586685180664,-1.873803973197937,-0.10426633805036545,0.37807369232177734,5.277987003326416,8.975841522216797,7.571262359619141,6.735087871551514,-7.065324306488037,3.4644217491149902,-9.827247619628906,-5.665004730224609,6.020706653594971,5.034205436706543,5.258695125579834,-10.748905181884766,2.8415920734405518,3.3876566886901855,6.388216972351074,1.8255462646484375,1.0213226079940796,6.1787214279174805,-8.886666297912598,0.5539000034332275,4.553494930267334,4.345030784606934,4.617827892303467,-0.4387162923812866,-2.4755702018737793,-2.0411503314971924,0.1866084188222885,-1.8733407258987427,2.308663845062256,6.093300819396973,-2.6141865253448486,0.38835597038269043,-1.2460674047470093,-5.551693439483643,4.821107864379883,-0.1598750650882721,-8.059385299682617,7.506811141967773,-2.5093257427215576,8.971755027770996,-8.439135551452637,-3.6342201232910156,-2.621062755584717,5.188832759857178,-6.611318111419678,6.284336566925049,6.071563720703125,-3.352307081222534,0.3709772527217865,6.617151737213135,2.8512063026428223,2.7589497566223145,0.7882829904556274,2.632612466812134,6.455399036407471,-0.009458212181925774,5.371397972106934,-8.537596702575684,5.416593551635742,-1.4360511302947998,4.583040714263916,-0.7985923886299133,-11.470120429992676,1.902501106262207,-3.3048300743103027,-9.064685821533203,3.4853219985961914,1.0389593839645386,3.657959461212158,-0.0011998298577964306,2.7072489261627197,-1.1756913661956787,2.7636735439300537,-2.402061939239502,-2.206299304962158,2.3344838619232178,5.76106595993042,3.3196780681610107,-3.3383049964904785,1.4243861436843872,4.631651401519775,5.200361728668213,2.2285993099212646,2.167314291000366,-0.2992115318775177,-2.9253711700439453,0.6490933299064636,4.816654682159424,5.395519733428955,-0.44431212544441223,1.1914132833480835,7.57905912399292,4.736921787261963,4.869649410247803,4.1063127517700195,7.30891227722168,-7.321595191955566,-9.543251037597656,0.4442548453807831],"y":[0.45612308382987976,2.255239486694336,1.514074444770813,0.2105221152305603,2.2115073204040527,1.490261197090149,4.343844413757324,1.847637414932251,2.726806879043579,4.0361504554748535,1.6942051649093628,5.842266082763672,-1.631290316581726,2.9257919788360596,5.242559432983398,6.959277629852295,5.532261371612549,2.4660861492156982,2.7960219383239746,2.6129024028778076,0.7850370407104492,2.444608688354492,-3.778663158416748,8.632448196411133,-10.118231773376465,6.601555824279785,8.769014358520508,-10.18911075592041,2.9029297828674316,3.1852657794952393,3.846412420272827,0.7400281429290771,3.173860549926758,-6.3767523765563965,0.004618980921804905,13.034424781799316,3.5468504428863525,-7.913296222686768,7.803289890289307,3.2696311473846436,-5.311695098876953,-11.010894775390625,-1.003868818283081,12.639315605163574,-8.127418518066406,-7.732326030731201,-11.632083892822266,-4.949147701263428,7.763996601104736,1.612699270248413,-6.055457592010498,0.9008937478065491,5.078145503997803,-0.7561007738113403,12.39311408996582,-10.270452499389648,-1.9758148193359375,-0.730741024017334,-1.4680187702178955,11.784029006958008,-4.281100749969482,-4.022994518280029,-1.1223623752593994,12.098172187805176,7.274731636047363,-4.700795650482178,-0.8994447588920593,-4.938631057739258,-2.55654239654541,-0.6869896054267883,11.572763442993164,0.10822455585002899,-10.776779174804688,-0.8819499611854553,-4.128664016723633,9.086407661437988,3.4164657592773438,-4.094879627227783,10.585755348205566,-6.994410514831543,12.098648071289062,-0.48060205578804016,-2.136537551879883,-1.7849531173706055,-9.387980461120605,3.8933839797973633,4.425793647766113,11.80284309387207,0.11019191890954971,-7.831305027008057,8.43406867980957,-5.917855739593506,-1.8108912706375122,2.265772819519043,-1.6196107864379883,-4.231769561767578,-8.9927339553833,5.924147129058838,11.405815124511719,0.560364305973053,4.929851531982422,1.3161344528198242,11.065997123718262,2.846140146255493,2.579747438430786,-3.801776885986328,-4.1966633796691895,-4.439092636108398,-3.4516446590423584,7.609616756439209,-1.245855450630188,11.078883171081543,-5.05971097946167,-0.7758582830429077,7.290314674377441,-6.532832145690918,-6.990629196166992,-5.97470760345459,2.868279218673706,-6.241917133331299,6.303874969482422,6.496702194213867,-2.907036781311035,-5.794785976409912,11.10966682434082,-6.419316291809082,4.308348178863525,-4.7699737548828125,-2.12892746925354,-0.8038827776908875,0.557529866695404,-10.241005897521973,-0.5005605816841125,-0.17184734344482422,-2.1326100826263428,-0.2103201448917389,-7.865352153778076,5.14427375793457,-0.905430793762207,6.73744535446167,-3.2590410709381104,-9.323281288146973,1.0301371812820435,-1.3826543092727661,-0.5389760136604309,0.431002676486969,9.006185531616211,-2.837433338165283,1.385231614112854,-10.304743766784668,-3.4887266159057617,-3.3521955013275146,2.794616222381592,-11.803040504455566,-1.17159903049469,1.9008909463882446,-0.07665527611970901,0.7850316166877747,4.182003021240234,-3.079592227935791,4.669587135314941,1.1208066940307617,-2.77463436126709,-1.9031169414520264,-1.2073616981506348,4.790650844573975,-4.450724124908447,-6.0755414962768555,-9.512365341186523,-3.2021384239196777,0.5093189477920532,-5.172869682312012,-0.8208730220794678,-3.5702500343322754,-8.179299354553223,-1.9702116250991821,9.14014720916748,-2.735517740249634,0.5991585850715637,-0.8570407629013062,-2.932124614715576,-8.986001014709473,9.017524719238281,2.9758806228637695,0.5461168885231018,-2.9844696521759033,-5.915985584259033,-3.966383457183838,6.6124587059021,-4.8381829261779785,4.511687755584717,-8.041621208190918,-9.162254333496094,-5.97634220123291,-4.909433841705322,-1.3345420360565186,2.125370740890503,-8.066200256347656,-4.235518932342529,-5.401586532592773,-9.657474517822266],"type":"scatter"}],                        {"autosize":false,"height":600,"template":{"data":{"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"width":800},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('7bac7096-4902-4757-a79e-985b03ed96f3');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div></div></div>
</div>
<p>Outros exemplos de combinação de conceitos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="o">.</span><span class="n">most_similar</span><span class="p">(</span><span class="n">positive</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;deputado&#39;</span><span class="p">,</span> <span class="s1">&#39;mulher&#39;</span><span class="p">],</span> <span class="n">negative</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;homem&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;deputada&#39;, 0.707239031791687),
 (&#39;senadora&#39;, 0.6504750847816467),
 (&#39;governadora&#39;, 0.5311956405639648),
 (&#39;vaga&#39;, 0.5001533031463623),
 (&#39;senador&#39;, 0.49622222781181335),
 (&#39;bancada&#39;, 0.49382296204566956),
 (&#39;prefeita&#39;, 0.4898069202899933),
 (&#39;esposa&#39;, 0.4874173700809479),
 (&#39;vereadora&#39;, 0.477497398853302),
 (&#39;ex-deputado&#39;, 0.4704161286354065)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="o">.</span><span class="n">most_similar</span><span class="p">(</span><span class="n">positive</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Sergipe&#39;</span><span class="p">,</span> <span class="s1">&#39;Salvador&#39;</span><span class="p">],</span> <span class="n">negative</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Bahia&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;Aracaju&#39;, 0.7568933963775635),
 (&#39;Fortaleza&#39;, 0.7413235306739807),
 (&#39;Maceió&#39;, 0.7330026030540466),
 (&#39;Manaus&#39;, 0.729759693145752),
 (&#39;Curitiba&#39;, 0.722693920135498),
 (&#39;Teresina&#39;, 0.7146587371826172),
 (&#39;Cuiabá&#39;, 0.7008069753646851),
 (&#39;Dourados&#39;, 0.6986944675445557),
 (&#39;Belém&#39;, 0.6970897912979126),
 (&#39;Goiânia&#39;, 0.6968613862991333)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="o">.</span><span class="n">most_similar</span><span class="p">(</span><span class="n">positive</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;congressista&#39;</span><span class="p">,</span> <span class="s1">&#39;política&#39;</span><span class="p">],</span> <span class="n">negative</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;homem&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;independente”&#39;, 0.5179454684257507),
 (&#39;Iniciando-se&#39;, 0.47886374592781067),
 (&#39;turística&#39;, 0.477364718914032),
 (&#39;duradouras&#39;, 0.4718947410583496),
 (&#39;“política&#39;, 0.4573584198951721),
 (&#39;induzida&#39;, 0.45302215218544006),
 (&#39;marxista”&#39;, 0.4503825306892395),
 (&#39;conflituosas&#39;, 0.45008936524391174),
 (&#39;pragmática&#39;, 0.4451919496059418),
 (&#39;stalinista&#39;, 0.4449922740459442)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="p">[</span><span class="s1">&#39;congressista&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="p">[</span><span class="s1">&#39;política&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="p">[</span><span class="s1">&#39;homem&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([-1.1804812 ,  0.17904007,  2.7701726 ,  2.2788234 , -2.3939579 ,
       -1.6261489 ,  3.037264  , -1.5370936 ,  0.1686287 ,  1.7679174 ,
       -0.6206008 , -1.4379971 ,  0.9625195 ,  5.3786445 , -1.5540149 ,
       -0.00777411, -1.401691  , -4.2874527 , -0.82898766,  1.8527349 ,
        1.1073897 ,  0.4124229 , -1.7202759 , -1.9285159 ,  0.22249055,
       -0.1637733 ,  0.3505941 , -1.6477919 ,  3.5996528 , -1.884695  ,
        0.70941716,  2.4855223 ,  0.19784053,  1.0554858 , -2.0812526 ,
        0.25975254,  1.0439771 ,  0.40970242,  0.78404856, -2.2612848 ,
        1.7169695 ,  0.73526394,  1.4105549 ,  4.066178  , -0.40555423,
        1.8521545 ,  3.7054353 ,  1.3822607 , -4.056506  ,  1.9932911 ,
        0.89136565, -2.6281335 ,  3.6849546 ,  3.6759586 , -0.3893448 ,
       -0.93963474,  3.059989  ,  0.07065499, -0.69516784, -1.2888556 ,
        0.92977023, -1.6649121 ,  2.6862006 , -2.4784298 ,  1.8600826 ,
        0.779212  ,  2.1920981 , -1.9809456 , -2.688896  ,  0.60114765,
       -2.3174565 ,  0.08518887,  0.43477178,  1.2217847 ,  0.9667772 ,
        1.8949485 ,  1.2996533 ,  2.6153111 , -0.04217112,  0.72740364,
       -0.7117096 , -0.73151827,  0.16029513,  0.06895769, -0.17937306,
        0.48638743, -0.52041715, -2.0970736 , -1.1521842 , -3.9579785 ,
        0.51819354,  0.12455559,  2.2292786 ,  0.33785737, -0.4980077 ,
       -2.9939485 , -2.5539153 , -1.4805562 ,  3.1075735 ,  0.99266756],
      dtype=float32)
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="word-movers-distance">
<h2>Word Movers Distance<a class="headerlink" href="#word-movers-distance" title="Permalink to this heading">#</a></h2>
<p>Este método permite que calculemos a distância entre dois documentos mesmo que estes não contenham palavras em comum. Este método foi proposto no artigo <a class="reference external" href="http://jmlr.org/proceedings/papers/v37/kusnerb15.pdf">“From Word Embeddings To Document Distances”</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DC</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">DHBBCorpus</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="o">.</span><span class="n">wmdistance</span><span class="p">(</span><span class="n">document1</span><span class="o">=</span><span class="n">DC</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">document2</span><span class="o">=</span><span class="n">DC</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.0211877866713601
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">DC</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">DC</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Bacharel&#39;, &#39;em&#39;, &#39;ciências&#39;, &#39;jurídicas&#39;, &#39;e&#39;, &#39;sociais&#39;, &#39;pela&#39;, &#39;Faculdade&#39;, &#39;de&#39;, &#39;Direito&#39;, &#39;da&#39;, &#39;Universidade&#39;, &#39;do&#39;, &#39;Espírito&#39;, &#39;Santo&#39;, &#39;formou-se&#39;, &#39;também&#39;, &#39;na&#39;, &#39;Escola&#39;, &#39;de&#39;, &#39;Educação&#39;, &#39;Física&#39;, &#39;do&#39;, &#39;Rio&#39;, &#39;de&#39;, &#39;Janeiro&#39;, &#39;então&#39;, &#39;Distrito&#39;, &#39;Federal&#39;, &#39;em&#39;, &#39;1941&#39;]
[&#39;Nesse&#39;, &#39;mesmo&#39;, &#39;ano&#39;, &#39;ingressou&#39;, &#39;na&#39;, &#39;Força&#39;, &#39;Policial&#39;, &#39;do&#39;, &#39;Espírito&#39;, &#39;Santo&#39;, &#39;onde&#39;, &#39;faria&#39;, &#39;carreira&#39;]
</pre></div>
</div>
</div>
</div>
<p>Vamos comparar o documento 1 acima (<em>Era presidido por João Câncio da Silva</em>) com outro sem nenhuma palavra em comum, e veremos que é possível calcular uma distância.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">wv</span><span class="o">.</span><span class="n">wmdistance</span><span class="p">(</span><span class="n">document1</span><span class="o">=</span><span class="n">DC</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">document2</span><span class="o">=</span><span class="s1">&#39;frequentou a escola religiosa em Niteroi e formou-se em 1935 pela UFF&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.9262080324851342
</pre></div>
</div>
</div>
</div>
</section>
<section id="visualizando-a-vizinanca-semantica">
<h2>Visualizando a Vizinança Semântica<a class="headerlink" href="#visualizando-a-vizinanca-semantica" title="Permalink to this heading">#</a></h2>
<p>Por meio do programa <a class="reference external" href="https://github.com/fccoelho/SemanticTree">SemanticTree</a>, podemos construir uma visualização animada da vizinhança semântica em uma rede.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>semanticTree<span class="w"> </span>-h
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>usage: semanticTree [-h] [-w W] [-n N] [-s SIM] [-S SIZE]
                    [-o {image,animation}]
                    model

Visualize the semantic neighborhood of a term. given a Gensim&#39;s Word2vec
trained model

positional arguments:
  model                 file name of a Gensim&#39;s Word2vec model.

options:
  -h, --help            show this help message and exit
  -w W                  the word or bi_gram to analyze
  -n N                  Max number of neighbors to scan.
  -s SIM, --sim SIM     minimum similarity to be a neighbor
  -S SIZE, --size SIZE  Maximum size of the three
  -o {image,animation}, --output {image,animation}
                        Type of visualization
</pre></div>
</div>
</div>
</div>
<p>Para aplicar ao nosso modelo, focando no conceito de política, o comando abaixo pode ser usado:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>semanticTree<span class="w"> </span>-w<span class="w"> </span>política<span class="w"> </span>dhbb.w2v
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Loading Data...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Detected Word2Vec model
Building graph...
</pre></div>
</div>
</div>
</div>
<p><img alt="rede" src="_images/gource.png" /></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="Capitulo_3.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Identificando Entidades Nomeadas e Similaridade Semântica</p>
      </div>
    </a>
    <a class="right-next"
       href="Capitulo_5.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Construindo um Classificador de Textos</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#word2vec">Word2vec</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#explorando-o-modelo">Explorando o modelo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizando-os-vetores-de-palavras">Visualizando os vetores de palavras</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#word-movers-distance">Word Movers Distance</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizando-a-vizinanca-semantica">Visualizando a Vizinança Semântica</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Flávio Codeço Coelho
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=ac02cc09edc035673794"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>